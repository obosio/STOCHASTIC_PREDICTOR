[pytest]
# Pytest configuration for Universal Stochastic Predictor
# See: https://docs.pytest.org/en/stable/reference/customize.html

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Default test path
testpaths = tests

# Command-line options (always applied)
addopts =
    # Verbose output
    -v
    # Show summary of failures
    --tb=short
    # Show local variables in tracebacks
    -l
    # Strict markers (fail if unknown marker used)
    --strict-markers
    # Warnings as errors (enforce clean code)
    -W error
    # Ignore specific warnings
    -W ignore::DeprecationWarning:past
    -W ignore::DeprecationWarning:jaxopt
    -W ignore::PendingDeprecationWarning
    -W ignore::pydantic.warnings.PydanticDeprecatedSince20

# Minimum Python version
minversion = 3.11

# Console output
console_output_style = progress

# Test timeout (requires pytest-timeout plugin)
# timeout = 300

# Markers (defined in conftest.py, documented here)
markers =
    api: Tests for Python/api/ module
    core: Tests for Python/core/ module
    kernels: Tests for Python/kernels/ module
    io: Tests for Python/io/ module
    slow: Tests that take >5 seconds
    integration: Integration tests (vs unit tests)

# Cache directory (for --lf, --ff flags)
cache_dir = .pytest_cache

# Code coverage (if pytest-cov installed)
# Run: pytest --cov=Python --cov-report=html
# [pytest-cov]
# Required for coverage tracking
# addopts = --cov=Python --cov-report=term-missing --cov-report=html

# Performance profiling (if pytest-benchmark installed)
# [pytest-benchmark]
# Run: pytest --benchmark-only
